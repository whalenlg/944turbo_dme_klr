Version 4
SHEET 1 1600 1000
SYMATTR AllowNodeReuse=0

* Full LTspice schematic using custom CA139EX symbol and subckt
* ADV12 = OUTPUT3 (pin 14)  -- user confirmed
* ADV14 = OUTPUT4 (pin 13)  -- updated per your last message
* Place CA139EX.asy in your LTspice sym folder and CA139EX.sub in lib/sub.

.INCLUDE CA139EX.sub

********************
* POWER RAILS
********************
SYMBOL voltage 120 40 R0
WINDOW 3 0 0 Left 0
SYMATTR InstName VCC
SYMATTR Value DC 5

SYMBOL gnd 120 520 R0

********************
* INPUT SOURCES (left)
********************
SYMBOL voltage 80 160 R0
WINDOW 3 0 0 Left 0
SYMATTR InstName VIN_TOP
SYMATTR Value SINE(0 1 100)

SYMBOL voltage 80 380 R0
WINDOW 3 0 0 Left 0
SYMATTR InstName VIN_BOT
SYMATTR Value SINE(0 1 200)

********************
* TOP CHANNEL (matches upper half of provided image)
********************
SYMBOL res 200 120 R0
SYMATTR InstName R801
SYMATTR Value 1k

SYMBOL res 200 160 R0
SYMATTR InstName R808
SYMATTR Value 33k

SYMBOL cap 280 160 R0
SYMATTR InstName C803
SYMATTR Value 27p

SYMBOL res 280 120 R0
SYMATTR InstName R805
SYMATTR Value 560

SYMBOL res 360 200 R0
SYMATTR InstName R803
SYMATTR Value 27

SYMBOL res 360 240 R0
SYMATTR InstName R802
SYMATTR Value 5.11k

SYMBOL cap 440 240 R0
SYMATTR InstName C804
SYMATTR Value 27p

* Hysteresis / feedback & reference
SYMBOL res 520 120 R0
SYMATTR InstName R814
SYMATTR Value 1Meg

SYMBOL res 520 160 R0
SYMATTR InstName R813
SYMATTR Value 22k

SYMBOL res 520 200 R0
SYMATTR InstName R812
SYMATTR Value 4.7k

********************
* BOTTOM CHANNEL (matches lower half of provided image)
********************
SYMBOL res 200 340 R0
SYMATTR InstName R801b
SYMATTR Value 1k

SYMBOL res 200 380 R0
SYMATTR InstName R816
SYMATTR Value 680

SYMBOL cap 280 380 R0
SYMATTR InstName C802
SYMATTR Value 10n

SYMBOL res 280 340 R0
SYMATTR InstName R815
SYMATTR Value 560

SYMBOL res 360 360 R0
SYMATTR InstName R804
SYMATTR Value 27

SYMBOL res 360 420 R0
SYMATTR InstName R806
SYMATTR Value 33k

SYMBOL cap 440 360 R0
SYMATTR InstName C805
SYMATTR Value 27p

* Hysteresis / feedback & reference bottom
SYMBOL res 520 360 R0
SYMATTR InstName R811
SYMATTR Value 1Meg

SYMBOL res 520 400 R0
SYMATTR InstName R810
SYMATTR Value 22k

SYMBOL res 520 440 R0
SYMATTR InstName R809
SYMATTR Value 4.7k

********************
* OUTPUT PULL-UPS & DIODES
********************
SYMBOL diode 760 200 R0
SYMATTR InstName D502
SYMATTR Value 1N4148

SYMBOL res 800 200 R0
SYMATTR InstName R506
SYMATTR Value 4.7k

SYMBOL diode 760 360 R0
SYMATTR InstName D503
SYMATTR Value 1N4148

SYMBOL res 800 360 R0
SYMATTR InstName R507
SYMATTR Value 4.7k

********************
* CUSTOM CA139EX SYMBOL (must exist in sym folder)
* Pin order (matching CA139EX.asy provided earlier):
* 1 OUT2, 2 OUT1, 3 V+, 4 IN1-, 5 IN1+, 6 IN2-, 7 IN2+, 8 IN3-, 9 IN3+, 10 IN4-, 11 IN4+, 12 GND, 13 OUT4, 14 OUT3
********************
SYMBOL CA139EX 520 240 R0
SYMATTR InstName U1
SYMATTR Value CA139EX

********************
* WIRES and NET LABELS
********************
WIRE 120 160 200 160
WIRE 200 160 200 120
WIRE 200 120 280 120
WIRE 280 120 360 120
WIRE 360 120 520 120

WIRE 120 380 200 380
WIRE 200 380 200 340
WIRE 200 340 280 340
WIRE 280 340 360 340
WIRE 360 340 520 340

WIRE 520 80 120 80
WIRE 520 520 120 520

* connect top input chain to CA139EX pins (IN1+ pin5, IN1- pin4)
WIRE 520 120 520 96
NETAlias N_IN1P
NETAlias N_IN1M
* (actual pin connections done by wiring to symbol pins on canvas)

* connect bottom input chain to CA139EX pins (IN2+ pin7, IN2- pin6)
WIRE 520 340 520 312
NETAlias N_IN2P
NETAlias N_IN2M

* connect outputs: ADV12 -> OUTPUT3 (pin14). We'll label net ADV12.
WIRE 520 200 760 200
FLAG 880 200 ADV12

* ADV14 -> OUTPUT4 (pin13)
WIRE 520 360 760 360
FLAG 880 360 ADV14

* Pull-ups & diodes to VCC
WIRE 800 200 520 80
WIRE 800 360 520 80

* Grounds and power flags
FLAG 520 520 0
FLAG 520 80 VCC

* Input labels
FLAG 120 152 VIN_TOP
FLAG 120 372 VIN_BOT

* Final net labels for internal nodes (for clarity)
FLAG 360 120 TOP_NODE
FLAG 360 340 BOT_NODE

********************
* SIMULATION CONTROL
********************
TEXT 1000 860 Left 0 !.tran 10m
TEXT 1000 880 Left 0 !.plot tran V(VIN_TOP) V(ADV12) V(VIN_BOT) V(ADV14)


