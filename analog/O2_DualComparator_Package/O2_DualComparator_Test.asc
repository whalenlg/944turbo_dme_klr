Version 4
SHEET 1 880 680
SYMATTR AllowNodeReuse=0

* Demo schematic that uses the O2_DUAL subckt (component-level)
* Place O2_DUAL.sub into LTspice lib/sub and O2_DualComparator.asy into sym/Custom

.INCLUDE O2_DUAL.sub

* Power rails
SYMBOL voltage 64 56 R0
SYMATTR InstName V12
SYMATTR Value DC 12

SYMBOL voltage 64 128 R0
SYMATTR InstName VLOGIC
SYMATTR Value DC 5

SYMBOL gnd 64 472 R0

* Sensor source (sweeping to show switching)
SYMBOL voltage 64 224 R0
SYMATTR InstName VSENSOR
SYMATTR Value PULSE(0 1 0 1u 1u 5m 10m)

* External pull-ups for outputs
SYMBOL res 512 160 R0
SYMATTR InstName Rpull_top
SYMATTR Value 4.7k

SYMBOL res 512 320 R0
SYMATTR InstName Rpull_bot
SYMATTR Value 4.7k

* Diodes as in original schematic (clamping)
SYMBOL diode 448 160 R0
SYMATTR InstName Dtop
SYMATTR Value 1N4148

SYMBOL diode 448 320 R0
SYMATTR InstNameDbot
SYMATTR Value 1N4148

* Place custom symbol (cell)
SYMBOL O2_DualComparator 256 200 R0
SYMATTR InstName U1
SYMATTR Value O2_DUAL

* Wiring
WIRE 96 224 192 224
WIRE 192 224 256 224
WIRE 256 224 256 152
WIRE 256 152 192 152
WIRE 192 152 96 152

WIRE 512 160 464 160
WIRE 464 160 256 160
WIRE 512 320 464 320
WIRE 464 320 256 320

* connect pull-ups to VLOGIC
WIRE 560 160 128 128
WIRE 560 320 128 128

* connect diodes from outputs to pull-ups
WIRE 448 160 512 160
WIRE 448 320 512 320

* net labels
FLAG 96 144 SENSOR
FLAG 128 128 VLOGIC
FLAG 64 56 V12
FLAG 256 472 0
FLAG 576 160 OUT_TOP
FLAG 576 320 OUT_BOT

* Subckt pins mapping (for clarity)
* U1 pins: SENSOR VLOGIC V12 GND OUT_TOP OUT_BOT

TEXT 680 520 Left 0 !.tran 12m
TEXT 680 540 Left 0 !.plot tran V(SENSOR) V(OUT_TOP) V(OUT_BOT)
